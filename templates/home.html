<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Document</title>
</head>
<style>
#matches-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
}

.match-card {
    width: 350px;
    height: 300px;
    border: 1px solid #ccc;
    border-radius: 8px;
    padding: 15px 0px;
    background-color: #f9f9f9;
    box-shadow: 2px 2px 6px rgba(0,0,0,0.1);
    font-family: Arial, sans-serif;
    font-size: 14px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.match-card h3 {
    margin: 0 0 10px 0;
    font-size: 16px;
    color: #333;
    text-align: center;
}

/* Linha com os dois jogadores lado a lado */
.players-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 10px;
}

.player {
    width: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.player img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    margin-bottom: 5px;
}

.player strong {
    margin-bottom: 5px;
}

.player-stats {
    font-size: 13px;
    color: #555;
    text-align: center;
}

/* Bot√£o ver mais */
#load-more {
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    background-color: #007bff;
    color: white;
    font-size: 14px;
    cursor: pointer;
    margin-top: 20px;
    display: flex;
    margin: 30px auto;
}
#load-more:hover {
    background-color: #0056b3;
}
.restart{
  justify-content: left;
  display: flex;
  padding: 20px;
}
.footer{
  margin: 40px auto 0px;
  display: flex;
  justify-content: center;
  border-top: 1px solid black;
}
</style>

<body>
  <form method="POST" action="/restart" class="restart">
    <button>Restart Data</div></button>
  </form>


<div id="matches-container">
  {% for match in matches %}
    <div class="match-card">
      <h3>{{ match.tournament_name }}</h3>
      <div class="players-row">
        <div class="player">
          <img src="{{ match.player1_picture }}" alt="{{ match.player1_name }}" style="max-width: 80px; height: auto;">
          <strong>{{ match.player1_name }}</strong>
          <div class="player-stats">
            Win: {{ match.player1_stats.win }}<br>
            Draw: {{ match.player1_stats.draw }}<br>
            Loss: {{ match.player1_stats.loss }}
          </div>
        </div>
        <div class="player">
          <img src="{{ match.player2_picture }}" alt="{{ match.player2_name }}" style="max-width: 80px; height: auto;">
          <strong>{{ match.player2_name }}</strong>
          <div class="player-stats">
            Win: {{ match.player2_stats.win }}<br>
            Draw: {{ match.player2_stats.draw }}<br>
            Loss: {{ match.player2_stats.loss }}
          </div>
        </div>
      </div>
      <div style="text-align:center;">
        <div style="display:flex; justify-content:space-between; margin:0 auto; width:75%; gap:10px; align-items:center; white-space:nowrap;">
            <div style="text-align:center;">
            Win Rate<br><span style="color:green">{{ match.player1_stats.win_rate }}%</span>
            </div>
            <div style="text-align:center;">
            Draw Rate<br><span>{{ match.player1_stats.draw_rate }}%</span>
            </div>
            <div style="text-align:center;">
            Win Rate<br><span style="color:green">{{ match.player2_stats.win_rate }}%</span>
            </div>
        </div>
        <div style="margin-top:15px; font-size: 16px;">
            {{ match.date_str }}
        </div>
        </div>



    </div>
  {% endfor %}
</div>
<footer class="footer">
  <h3>Made By Desert/Leonardo</h3>
</footer>
<script>
  
const allMatches = {{ matches|tojson }};
let displayed = 20;

document.getElementById("load-more")?.addEventListener("click", () => {
  const container = document.getElementById("matches-container");
  const nextMatches = allMatches.slice(displayed, displayed + 20);

  nextMatches.forEach(match => {
    const card = document.createElement("div");
    card.classList.add("match-card");
    card.innerHTML = `
      <h3>${match.tournament_name}</h3>
      <div class="players-row">
        <div class="player">
          <img src="/static/icons/player1.png" alt="${match.player1_name}">
          <strong>${match.player1_name}</strong>
          <div class="player-stats">
            Win: ${match.player1_stats.win_rate}%<br>
            Draw: ${match.player1_stats.draw_rate}%<br>
            Loss: ${match.player1_stats.loss_rate}%
          </div>
        </div>
        <div class="player">
          <img src="/static/icons/player2.png" alt="${match.player2_name}">
          <strong>${match.player2_name}</strong>
          <div class="player-stats">
            Win: ${match.player2_stats.win_rate}%<br>
            Draw: ${match.player2_stats.draw_rate}%<br>
            Loss: ${match.player2_stats.loss_rate}%
          </div>
        </div>
      </div>
      <div style="text-align:center;">
        <small>${match.date}</small>
      </div>
    `;
    container.appendChild(card);
  });

  displayed += 20;

  if (displayed >= allMatches.length) {
    document.getElementById("load-more").style.display = "none";
  }
});
</script>

</body>
</html>
